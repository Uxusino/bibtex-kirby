{% extends "layout.html" %}

{% block title %}
Bibtex app
{% endblock %}

{% block body %}

<h2>Bibtex app</h2>

<form action="/create_bibtex" method="post">
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul>
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}
  <label>Create an article</label>
  <br>
  <label for="label">Label (must be unique)</label>
  <input type="text" name="label" required>
  <br>
  <label for="title">Title</label>
  <input type="text" name="title" required>
  <br>
  <label for="author">Author</label>
  <input type="text" name="author" required>
  <br>
  <label for="journal">Journal</label>
  <input type="text" name="journal" required>
  <br>
  <label for="year">Year</label>
  <input type="text" name="year" required>
  <button type="submit">
    Create
  </button>
</form>

<ul>
  {% if bibtexs == [] %}
    <div>
      You don't have references yet.
    </div>
  {% endif %}
  {% for bibtex in bibtexs %}
    <li style="display: flex">
      <div>
        {{ bibtex.label}}  ({{ bibtex.type }})
        {% if bibtex.data %}
          {% for k, v in bibtex.data.items() %}
            <li>{{ k }}: {{ v }}</li>
          {% endfor %}
        {% endif %}
      </div>
    </li>
  {% endfor %}
</ul>

{% endblock %}